<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:util="http://www.springframework.org/schema/util"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
            http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd">

    <bean id="setupGameFlow" class="com.gempukku.tcg.generic.flow.MultiActionGameFlow">
        <property name="gameActions">
            <util:list>
                <bean class="com.gempukku.tcg.generic.player.ForEachPlayerAction">
                    <property name="playerAttribute" value="player"/>
                    <property name="gameAction">
                        <bean class="com.gempukku.tcg.generic.action.GameEffectAction">
                            <property name="indexAttribute" value="effectIndex.*{player}"/>
                            <property name="effects">
                                <util:list>
                                    <bean id="selectStartingCharacters"
                                          class="com.gempukku.tcg.generic.stack.SelectArbitraryCardsFromStackEffect">
                                        <property name="attributeName" value="selectedCharacters.*{player}"/>
                                        <property name="min" value="3"/>
                                        <property name="max" value="3"/>
                                        <property name="player" value="*{player}"/>
                                        <property name="stackType" value="setupCharactersZone"/>
                                        <property name="message" value="Choose starting characters"/>
                                    </bean>
                                    <bean id="putStartingCharactersInFrontLine"
                                          class="com.gempukku.tcg.generic.stack.MoveObjectsBetweenStacksEffect">
                                        <property name="player" value="*{player}"/>
                                        <property name="stackFrom" value="setupCharactersZone"/>
                                        <property name="stackTo" value="frontLineZone"/>
                                        <property name="ids" value="*{selectedCharacters.*{player}}"/>
                                    </bean>
                                    <bean id="putRemainingCharactersInReserve"
                                          class="com.gempukku.tcg.generic.stack.MoveObjectsBetweenStacksEffect">
                                        <property name="player" value="*{player}"/>
                                        <property name="stackFrom" value="setupCharactersZone"/>
                                        <property name="stackTo" value="reserveZone"/>
                                    </bean>
                                    <bean id="setupDeck"
                                          class="com.gempukku.tcg.generic.stack.MoveObjectsBetweenStacksEffect">
                                        <property name="player" value="*{player}"/>
                                        <property name="stackFrom" value="setupDeckZone"/>
                                        <property name="stackTo" value="deckZone"/>
                                    </bean>
                                    <bean id="shuffleDeck" class="com.gempukku.tcg.generic.stack.ShuffleStackEffect">
                                        <property name="player" value="*{player}"/>
                                        <property name="stack" value="deckZone"/>
                                    </bean>
                                </util:list>
                            </property>
                        </bean>
                    </property>
                </bean>
                <bean id="changePhase" class="com.gempukku.tcg.generic.action.GameEffectAction">
                    <property name="effects">
                        <util:list>
                            <bean class="com.gempukku.tcg.generic.phase.SetPhaseEffect">
                                <property name="value" value="Start"/>
                            </bean>
                        </util:list>
                    </property>
                </bean>
            </util:list>
        </property>
    </bean>

    <bean id="startGameFlow" class="com.gempukku.tcg.generic.flow.MultiActionGameFlow">
        <property name="gameActions">
            <util:list>
                <bean class="com.gempukku.tcg.generic.player.ForEachPlayerAction">
                    <property name="playerAttribute" value="player"/>
                    <property name="gameAction">
                        <bean class="com.gempukku.tcg.generic.action.GameEffectAction">
                            <property name="indexAttribute" value="effectIndex.*{player}"/>
                            <property name="effects">
                                <util:list>
                                    <bean id="drawEightCards" class="com.gempukku.tcg.generic.stack.MoveTopObjectsBetweenStacksEffect">
                                        <property name="stackFrom" value="deckZone"/>
                                        <property name="stackTo" value="handZone"/>
                                        <property name="count" value="8"/>
                                        <property name="player" value="*{player}"/>
                                    </bean>
                                    <bean id="discardDuplicatePowerCards" class="com.gempukku.tcg.generic.effect.RepeatWhileEffect">
                                        <property name="indexAttribute" value="repeatIndex.*{player}"/>
                                        <property name="condition">
                                            <bean class="com.gempukku.tcg.overpower.condition.HasDuplicatePowerCardsCondition">
                                                <property name="stack" value="handZone"/>
                                                <property name="player" value="*{player}"/>
                                            </bean>
                                        </property>
                                        <property name="effects">
                                            <util:list>
                                                <bean class="com.gempukku.tcg.generic.effect.RemoveAttributeEffect">
                                                    <property name="attributeName" value="selectedCards.*{player}"/>
                                                </bean>
                                                <bean class="com.gempukku.tcg.overpower.effect.FindDuplicatePowerCardsEffect">
                                                    <property name="stack" value="handZone"/>
                                                    <property name="player" value="*{player}"/>
                                                    <property name="attributeName" value="duplicateCharacters.*{player}"/>
                                                </bean>
                                                <bean class="com.gempukku.tcg.generic.stack.SelectDigitalObjectsByIdEffect">
                                                    <property name="ids" value="duplicateCharacters.*{player}"/>
                                                    <property name="player" value="*{player}"/>
                                                    <property name="message" value="Choose duplicate power card to discard"/>
                                                    <property name="attributeName" value="selectedCards.*{player}"/>
                                                    <property name="min" value="1"/>
                                                    <property name="max" value="1"/>
                                                </bean>
                                                <bean class="com.gempukku.tcg.generic.stack.MoveObjectsBetweenStacksEffect">
                                                    <property name="stackFrom" value="handZone"/>
                                                    <property name="stackTo" value="powerPackZone"/>
                                                    <property name="player" value="*{player}"/>
                                                    <property name="ids" value="selectedCards.*{player}"/>
                                                </bean>
                                            </util:list>
                                        </property>
                                    </bean>
                                </util:list>
                            </property>
                        </bean>
                    </property>
                </bean>
                <bean id="endProcessing" class="com.gempukku.tcg.generic.action.GameEffectAction">
                    <property name="effects">
                        <bean class="com.gempukku.tcg.overpower.effect.EndProcessingTempEffect"/>
                    </property>
                </bean>
            </util:list>
        </property>
    </bean>

</beans>