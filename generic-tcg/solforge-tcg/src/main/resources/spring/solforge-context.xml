<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:util="http://www.springframework.org/schema/util"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
            http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd">
    <bean id="solforgeGameStateFactory" class="com.gempukku.tcg.generic.SimpleGameFactory">
        <property name="gameBuilderMap">
            <util:map>
                <entry key="standard" value-ref="solforgeGameStateBuilder"/>
            </util:map>
        </property>
    </bean>

    <bean id="solforgeGameStateBuilder" class="com.gempukku.tcg.generic.SpringGameBuilderFactory">
        <property name="contextPath" value="/spring/solforge-game-state-context.xml"/>
        <property name="gameStateBeanName" value="gameState"/>
        <property name="gameProcessorBeanName" value="gameProcessor"/>
        <property name="alwaysOnGameModifiers" ref="alwaysOnGameModifiers"/>
        <property name="objectResolver" ref="objectResolver"/>
    </bean>

    <bean id="objectResolver" class="com.gempukku.tcg.solforge.SolforgeCardBlueprintResolver"/>

    <util:list id="alwaysOnGameModifiers">
        <bean class="com.gempukku.tcg.solforge.PlayCardsFromHandActionDefinition"/>
        <bean class="com.gempukku.tcg.solforge.battle.BattleActionDefinition"/>
        <bean class="com.gempukku.tcg.solforge.pass.PassActionDefinition"/>
        <ref bean="moveActionModifier"/>
    </util:list>

    <bean id="moveActionModifier" class="com.gempukku.tcg.solforge.move.MoveActionModifier">
        <property name="effects">
            <bean class="com.gempukku.tcg.generic.action.EffectsGameObjectActionPossibilitySource">
                <property name="textEvaluator">
                    <bean class="com.gempukku.tcg.generic.evaluator.ConcatenateStringEvaluator">
                        <property name="stringEvaluators">
                            <util:list>
                                <bean class="com.gempukku.tcg.generic.evaluator.ConstantStringEvaluator">
                                    <property name="value" value="Move "/>
                                </bean>
                                <bean class="com.gempukku.tcg.solforge.evaluator.CardNameEvaluator"/>
                            </util:list>
                        </property>
                    </bean>
                </property>
                <property name="effects">
                    <util:list>
                        <bean parent="selectionEffect">
                            <property name="destinationProperty" value="targetLane"/>
                            <property name="message">
                                <bean class="com.gempukku.tcg.generic.evaluator.ConstantStringEvaluator">
                                    <property name="value" value="Choose lane to play creature to"/>
                                </bean>
                            </property>
                            <property name="selectingPlayer" value="*{owner}"/>
                            <property name="laneFilter">
                                <bean class="com.gempukku.tcg.solforge.filter.DistanceLaneFilter">
                                    <property name="maxDistance">
                                        <bean parent="keywordCountEvaluator">
                                            <property name="keyword" value="move"/>
                                            <property name="minValue" value="0"/>
                                        </bean>
                                    </property>
                                    <property name="minDistance">
                                        <bean class="com.gempukku.tcg.generic.evaluator.ConstantIntEvaluator">
                                            <property name="value" value="1"/>
                                        </bean>
                                    </property>
                                </bean>
                            </property>
                        </bean>
                        <bean parent="destroyCreatureInLane">
                            <property name="laneProperty" value="targetLane"/>
                        </bean>
                        <bean class="com.gempukku.tcg.generic.effect.RemovePropertyEffect">
                            <property name="property" value="targetLane"/>
                        </bean>
                        <bean class="com.gempukku.tcg.generic.effect.EmitEventEffect">
                            <property name="gameEventEngine" value="gameEventEngine"/>
                            <property name="eventSource">
                                <bean class="com.gempukku.tcg.solforge.move.MovedCardEventSource"/>
                            </property>
                        </bean>
                    </util:list>
                </property>
            </bean>
        </property>
    </bean>

    <bean id="destroyCreatureInLane" abstract="true" class="com.gempukku.tcg.solforge.effect.DestroyCreatureAlreadyInLaneEffect">
        <property name="laneProperty" value="lane"/>
    </bean>

    <bean id="keywordCountEvaluator" abstract="true" class="com.gempukku.tcg.generic.evaluator.KeywordCountEvaluator">
        <property name="keywordManager" value="keywordManager"/>
    </bean>

    <import resource="solforge-cards-context.xml"/>
</beans>