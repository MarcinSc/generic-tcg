<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:util="http://www.springframework.org/schema/util"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
            http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd">
    <bean id="gameState" class="com.gempukku.tcg.GameState">
        <property name="gameObjects">
            <util:map>
                <entry key="gameEventEngine" value-ref="gameEventEngine"/>
                <entry key="gameModifierEngine" value-ref="gameModifierEngine"/>
                <entry key="healthCounter" value-ref="healthCounter"/>
                <entry key="levelCounter" value-ref="levelCounter"/>
                <entry key="passCounter" value-ref="passCounter"/>
                <entry key="turnCounter" value-ref="turnCounter"/>
                <entry key="deck" value-ref="deckZone"/>
                <entry key="discard" value-ref="discardZone"/>
                <entry key="hand" value-ref="handZone"/>
                <entry key="play" value-ref="playZone"/>
                <entry key="waitingTriggers" value-ref="waitingTriggersZone"/>
                <entry key="stack" value-ref="stackZone"/>
                <entry key="playerTurn" value-ref="playerTurn"/>
                <entry key="playerOrder" value-ref="playerOrder"/>
                <entry key="turnEventCollector" value-ref="turnEventCollector"/>
                <entry key="decisionHolder" value-ref="decisionHolder"/>
                <entry key="turnPhase" value-ref="turnPhase"/>
                <entry key="gameObjectManager" value-ref="gameObjectManager"/>

                <entry key="gameActionManager" value-ref="gameActionManager"/>
                <entry key="gameActionStack" value-ref="gameActionStack"/>

                <entry key="keywordManager" value-ref="keywordManager"/>
                <entry key="attackManager" value-ref="attackManager"/>
                <entry key="healthManager" value-ref="healthManager"/>
            </util:map>
        </property>
    </bean>

    <bean id="attackManager" class="com.gempukku.tcg.generic.stat.StatManager">
        <property name="baseEvaluator">
            <bean class="com.gempukku.tcg.solforge.stat.BlueprintAttackBase"/>
        </property>
    </bean>

    <bean id="healthManager" class="com.gempukku.tcg.generic.stat.StatManager">
        <property name="baseEvaluator">
            <bean class="com.gempukku.tcg.solforge.stat.BlueprintHealthBase"/>
        </property>
    </bean>

    <bean id="gameProcessor" class="com.gempukku.tcg.solforge.SetupSolforgeGameProcessor">
        <property name="gameProcessor">
            <bean class="com.gempukku.tcg.generic.DecisionHolderBasedGameProcessor">
                <property name="decisionHolderPerPlayer" ref="decisionHolder"/>
                <property name="gameFlow" ref="gameFlow"/>
            </bean>
        </property>
    </bean>

    <bean id="gameFlow" class="com.gempukku.tcg.generic.GameActionStackFlow">
        <property name="gameActionStack" ref="gameActionStack"/>
    </bean>

    <bean id="gameObjectManager" class="com.gempukku.tcg.generic.object.GameObjectManager">
        <property name="zoneMoveChangesId" value="true"/>
        <property name="zones">
            <util:list>
                <ref bean="playZone"/>
                <ref bean="waitingTriggersZone"/>
                <ref bean="stackZone"/>
            </util:list>
        </property>
        <property name="zonesPerPlayer">
            <util:list>
                <ref bean="deckZone"/>
                <ref bean="discardZone"/>
                <ref bean="handZone"/>
            </util:list>
        </property>
    </bean>

    <bean id="gameActionStack" class="com.gempukku.tcg.generic.action.GameActionStack">
        <property name="rootGameAction" ref="rootGameAction"/>
    </bean>

    <bean id="gameActionManager" class="com.gempukku.tcg.generic.action.GameActionManager">
        <property name="actionModifiers">
            <util:list>
            </util:list>
        </property>
    </bean>

    <bean id="rootGameAction" class="com.gempukku.tcg.solforge.SolforgeTurnStructureAction"/>

    <bean id="decisionHolder" class="com.gempukku.tcg.generic.decision.PerPlayerDecisionHolder"/>

    <bean id="deckZone" class="com.gempukku.tcg.generic.object.PerPlayerZone">
        <property name="name" value="deck"/>
    </bean>
    <bean id="discardZone" class="com.gempukku.tcg.generic.object.PerPlayerZone">
        <property name="name" value="discard"/>
    </bean>
    <bean id="handZone" class="com.gempukku.tcg.generic.object.PerPlayerZone">
        <property name="name" value="hand"/>
    </bean>

    <bean id="playZone" class="com.gempukku.tcg.generic.object.Zone">
        <property name="name" value="play"/>
    </bean>

    <bean id="waitingTriggersZone" class="com.gempukku.tcg.generic.object.Zone">
        <property name="name" value="waitingTriggers"/>
    </bean>

    <bean id="stackZone" class="com.gempukku.tcg.generic.object.Zone">
        <property name="name" value="stack"/>
    </bean>

    <bean id="playerTurn" class="com.gempukku.tcg.generic.other.Property"/>
    <bean id="playerOrder" class="com.gempukku.tcg.generic.other.Property"/>

    <bean id="turnPhase" class="com.gempukku.tcg.generic.other.Property"/>

    <bean id="turnEventCollector" class="com.gempukku.tcg.generic.event.GameEventCollector">
        <property name="resetCondition">
            <bean class="com.gempukku.tcg.generic.event.condition.EventTypeCondition">
                <property name="type">
                    <util:constant static-field="com.gempukku.tcg.generic.event.type.GenericEventType.PLAYER_TURN_END"/>
                </property>
            </bean>
        </property>
    </bean>

    <bean id="gameEventEngine" class="com.gempukku.tcg.generic.event.GameEventEngine">
        <property name="gameEventListeners">
            <util:set>
                <ref bean="gameModifierEngine"/>
                <ref bean="turnEventCollector"/>
                <ref bean="triggersFromCardsInPlay"/>
            </util:set>
        </property>
    </bean>

    <bean id="triggersFromCardsInPlay" class="com.gempukku.tcg.solforge.trigger.TriggersFromCardsInPlayListener"/>

    <bean id="gameModifierEngine" class="com.gempukku.tcg.generic.modifier.GameModifierEngine">
        <property name="gameModifierMap">
            <util:map>
                <entry key="com.gempukku.tcg.generic.modifier.ActionModifier" value-ref="gameActionManager"/>
                <entry key="com.gempukku.tcg.generic.keyword.KeywordModifier" value-ref="keywordManager"/>
                <entry key="com.gempukku.tcg.solforge.stat.AttackModifier" value-ref="attackManager"/>
                <entry key="com.gempukku.tcg.solforge.stat.HealthModifier" value-ref="healthManager"/>
            </util:map>
        </property>
    </bean>

    <bean id="keywordManager" class="com.gempukku.tcg.generic.keyword.KeywordManager">
        <property name="keywordModifiers">
            <util:list>
                <bean class="com.gempukku.tcg.solforge.modifier.BlueprintKeywordModifier"/>
            </util:list>
        </property>
    </bean>

    <bean id="healthCounter" class="com.gempukku.tcg.generic.other.PerPlayerCounter">
        <property name="defaultValue" value="100"/>
    </bean>

    <bean id="levelCounter" class="com.gempukku.tcg.generic.other.PerPlayerCounter">
        <property name="defaultValue" value="1"/>
    </bean>

    <bean id="passCounter" class="com.gempukku.tcg.generic.other.Counter">
        <property name="value" value="0"/>
    </bean>

    <bean id="turnCounter" class="com.gempukku.tcg.generic.other.Counter">
        <property name="value" value="0"/>
    </bean>
</beans>